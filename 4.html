<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–æ–≥–æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            font-size: 2.2em;
        }

        .subtitle {
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .level-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .level-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .level-beginner {
            background: linear-gradient(45deg, #27ae60, #229954);
            color: white;
        }

        .level-intermediate {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .level-advanced {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .level-btn.active {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .level-description {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-size: 1em;
            border-left: 4px solid #3498db;
        }

        .problem-container {
            background: #e6f2ff;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
        }

        .problem-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .numbers-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .number-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            min-width: 60px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 2px solid #3498db;
        }

        .input-section {
            margin: 25px 0;
        }

        .answer-input {
            padding: 15px 20px;
            font-size: 1.2em;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            width: 150px;
            text-align: center;
            margin: 0 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-check {
            background: linear-gradient(45deg, #27ae60, #229954);
            color: white;
        }

        .btn-check:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-next {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-hint {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-hint:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .hint-section {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
        }

        .formula {
            background: #e6f2ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            font-weight: bold;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .celebrate {
            animation: celebrate 0.5s ease-in-out;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .level-btn {
                padding: 10px 20px;
                font-size: 0.9em;
            }
            
            .number-card {
                padding: 15px;
                font-size: 1.2em;
                min-width: 50px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–æ–≥–æ</h1>
        <p class="subtitle">–û–±–∏—Ä–∞–π —Ä—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–¥–æ—Å–∫–æ–Ω–∞–ª—é–π —Å–≤–æ—ó –Ω–∞–≤–∏—á–∫–∏!</p>

        <div class="level-selector">
            <button class="level-btn level-beginner active" onclick="setLevel('beginner')">
                üü¢ –ü–æ—á–∞—Ç–∫–æ–≤–∏–π
            </button>
            <button class="level-btn level-intermediate" onclick="setLevel('intermediate')">
                üîµ –°–µ—Ä–µ–¥–Ω—ñ–π
            </button>
            <button class="level-btn level-advanced" onclick="setLevel('advanced')">
                üî¥ –ü—Ä–æ—Å—É–Ω—É—Ç–∏–π
            </button>
        </div>

        <div class="level-description" id="levelDescription">
            –ü—Ä–æ—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ –Ω–µ–≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —á–∏—Å–µ–ª —Ç–∞ –≤—ñ–∑—É–∞–ª—å–Ω–∏–º–∏ –ø—ñ–¥–∫–∞–∑–∫–∞–º–∏
        </div>

        <div class="problem-container">
            <div class="problem-text" id="problemText"></div>
            
            <div class="numbers-container" id="numbersContainer">
                <!-- –ß–∏—Å–ª–∞ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —Ç—É—Ç -->
            </div>

            <div class="formula" id="formula">
                –°–µ—Ä–µ–¥–Ω—î = (–°—É–º–∞ —á–∏—Å–µ–ª) √∑ (–ö—ñ–ª—å–∫—ñ—Å—Ç—å —á–∏—Å–µ–ª)
            </div>

            <div class="input-section">
                <label for="answerInput"><strong>–°–µ—Ä–µ–¥–Ω—î –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ:</strong></label>
                <input type="number" id="answerInput" class="answer-input" step="0.1">
                <button class="btn-check" onclick="checkAnswer()">‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
            </div>
        </div>

        <div class="hint-section" id="hintSection" style="display: none;">
            <h3>üí° –ü—ñ–¥–∫–∞–∑–∫–∞:</h3>
            <p id="hintText"></p>
        </div>

        <div class="feedback" id="feedback" style="display: none;"></div>

        <div class="controls">
            <button class="btn-hint" onclick="showHint()">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>
            <button class="btn-next" onclick="nextProblem()">‚û°Ô∏è –ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">–ë–∞–ª–∏</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="correctCount">0</div>
                <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="levelScore">0</div>
                <div class="stat-label">–†—ñ–≤–µ–Ω—å</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">–°–µ—Ä—ñ—è</div>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = 'beginner';
        let currentProblem = null;
        let score = 0;
        let correctCount = 0;
        let levelScore = 0;
        let streak = 0;
        let showFormula = true;

        const levelConfig = {
            beginner: {
                description: "–ü—Ä–æ—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ –Ω–µ–≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —á–∏—Å–µ–ª —Ç–∞ –≤—ñ–∑—É–∞–ª—å–Ω–∏–º–∏ –ø—ñ–¥–∫–∞–∑–∫–∞–º–∏",
                minNumbers: 2,
                maxNumbers: 4,
                minValue: 1,
                maxValue: 20,
                points: 5,
                showFormula: true
            },
            intermediate: {
                description: "–ó–∞–≤–¥–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∑ –±—ñ–ª—å—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —á–∏—Å–µ–ª",
                minNumbers: 4,
                maxNumbers: 6,
                minValue: 10,
                maxValue: 50,
                points: 10,
                showFormula: true
            },
            advanced: {
                description: "–°–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∂–∏—Ç—Ç—î–≤–∏–º–∏ —Å–∏—Ç—É–∞—Ü—ñ—è–º–∏",
                minNumbers: 5,
                maxNumbers: 8,
                minValue: 20,
                maxValue: 100,
                points: 15,
                showFormula: false
            }
        };

        const advancedScenarios = [
            "–£—á–µ–Ω—å –æ—Ç—Ä–∏–º–∞–≤ —Ç–∞–∫—ñ –æ—Ü—ñ–Ω–∫–∏ –∑ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏:",
            "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è:",
            "–¶—ñ–Ω–∏ –Ω–∞ —Ç–æ–≤–∞—Ä –≤ —Ä—ñ–∑–Ω–∏—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö:",
            "–®–≤–∏–¥–∫—ñ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±—ñ–ª—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –¥—ñ–ª—è–Ω–∫–∞—Ö –¥–æ—Ä–æ–≥–∏:",
            "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤ —Å–∞–π—Ç—É –∑–∞ –¥–µ–Ω—å:"
        ];

        function setLevel(level) {
            currentLevel = level;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∞–∫—Ç–∏–≤–Ω—É –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.level-${level}`).classList.add('active');
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –æ–ø–∏—Å —Ä—ñ–≤–Ω—è
            document.getElementById('levelDescription').textContent = levelConfig[level].description;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ —Ñ–æ—Ä–º—É–ª—É
            showFormula = levelConfig[level].showFormula;
            document.getElementById('formula').style.display = showFormula ? 'block' : 'none';
            
            // –ì–µ–Ω–µ—Ä—É—î–º–æ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
            generateProblem();
            
            // –°–∫–∏–¥–∞—î–º–æ —Å–µ—Ä—ñ—é
            streak = 0;
            updateStats();
        }

        function generateProblem() {
            const config = levelConfig[currentLevel];
            const numbersCount = Math.floor(Math.random() * (config.maxNumbers - config.minNumbers + 1)) + config.minNumbers;
            
            let numbers = [];
            for (let i = 0; i < numbersCount; i++) {
                numbers.push(Math.floor(Math.random() * (config.maxValue - config.minValue + 1)) + config.minValue);
            }
            
            const sum = numbers.reduce((a, b) => a + b, 0);
            const average = sum / numbersCount;
            
            currentProblem = {
                numbers: numbers,
                average: average,
                sum: sum,
                count: numbersCount
            };
            
            displayProblem();
            clearFeedback();
        }

        function displayProblem() {
            const config = levelConfig[currentLevel];
            const numbersContainer = document.getElementById('numbersContainer');
            numbersContainer.innerHTML = '';
            
            let problemText = '';
            
            if (currentLevel === 'advanced') {
                const scenario = advancedScenarios[Math.floor(Math.random() * advancedScenarios.length)];
                problemText = `${scenario}`;
            } else {
                problemText = "–ó–Ω–∞–π–¥–∏ —Å–µ—Ä–µ–¥–Ω—î –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ —á–∏—Å–µ–ª:";
            }
            
            document.getElementById('problemText').textContent = problemText;
            
            currentProblem.numbers.forEach((number, index) => {
                const numberCard = document.createElement('div');
                numberCard.className = 'number-card';
                numberCard.textContent = number;
                if (currentLevel === 'beginner') {
                    numberCard.style.background = `hsl(${index * 60}, 70%, 85%)`;
                }
                numbersContainer.appendChild(numberCard);
            });
            
            // –û—á–∏—â–∞—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
        }

        function checkAnswer() {
            const userAnswer = parseFloat(document.getElementById('answerInput').value);
            const feedback = document.getElementById('feedback');
            const correctAnswer = currentProblem.average;
            
            if (isNaN(userAnswer)) {
                feedback.textContent = "–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ!";
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                streak = 0;
                updateStats();
                return;
            }
            
            const tolerance = 0.1; // –î–æ–ø—É—Å–∫ –¥–ª—è –¥—Ä–æ–±–æ–≤–∏—Ö —á–∏—Å–µ–ª
            const isCorrect = Math.abs(userAnswer - correctAnswer) < tolerance;
            
            if (isCorrect) {
                feedback.innerHTML = `‚úÖ <strong>–í—ñ—Ä–Ω–æ!</strong> –°–µ—Ä–µ–¥–Ω—î –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ: ${correctAnswer.toFixed(2)}`;
                feedback.className = 'feedback correct';
                
                score += levelConfig[currentLevel].points;
                correctCount++;
                streak++;
                levelScore += levelConfig[currentLevel].points;
                
                // –ê–Ω—ñ–º–∞—Ü—ñ—è —Å–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è
                document.querySelector('.problem-container').classList.add('celebrate');
                setTimeout(() => {
                    document.querySelector('.problem-container').classList.remove('celebrate');
                }, 500);
                
            } else {
                feedback.innerHTML = `‚ùå <strong>–ù–µ –≤—ñ—Ä–Ω–æ.</strong> –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: ${correctAnswer.toFixed(2)}`;
                feedback.className = 'feedback incorrect';
                streak = 0;
            }
            
            feedback.style.display = 'block';
            updateStats();
            hideHint();
        }

        function showHint() {
            const hintSection = document.getElementById('hintSection');
            const hintText = document.getElementById('hintText');
            
            hintText.innerHTML = `
                <strong>–ö—Ä–æ–∫ 1:</strong> –ó–Ω–∞–π–¥–∏ —Å—É–º—É —á–∏—Å–µ–ª: ${currentProblem.numbers.join(' + ')} = ${currentProblem.sum}<br>
                <strong>–ö—Ä–æ–∫ 2:</strong> –ü–æ–¥—ñ–ª–∏ —Å—É–º—É –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∏—Å–µ–ª: ${currentProblem.sum} √∑ ${currentProblem.count}<br>
                <strong>–ö—Ä–æ–∫ 3:</strong> –û—Ç—Ä–∏–º–∞—î—à: ${currentProblem.average.toFixed(2)}
            `;
            
            hintSection.style.display = 'block';
        }

        function hideHint() {
            document.getElementById('hintSection').style.display = 'none';
        }

        function clearFeedback() {
            document.getElementById('feedback').style.display = 'none';
            hideHint();
        }

        function nextProblem() {
            generateProblem();
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('levelScore').textContent = levelScore;
            document.getElementById('streak').textContent = streak;
        }

        // –î–æ–∑–≤–æ–ª—è—î–º–æ –Ω–∞—Ç–∏—Å–∫–∞—Ç–∏ Enter –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        window.onload = function() {
            setLevel('beginner');
        };
    </script>
</body>
</html>
