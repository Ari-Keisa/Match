<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥—Ä–æ–±—ñ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f8ff;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c5aa0;
        }
        .instructions {
            background: #e6f2ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: left;
        }
        .workspace {
            width: 300px;
            height: 300px;
            border: 3px dashed #2c5aa0;
            border-radius: 15px;
            margin: 20px auto;
            background: #f9f9f9;
            position: relative;
        }
        .shape {
            width: 100px;
            height: 100px;
            background: #4CAF50;
            border: 2px solid #2E7D32;
            border-radius: 10px;
            position: absolute;
            cursor: move;
        }
        .piece {
            width: 80px;
            height: 80px;
            background: #FF9800;
            border: 2px solid #E65100;
            border-radius: 8px;
            position: absolute;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .controls {
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            background: #2c5aa0;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #1e3d72;
        }
        .stats {
            font-size: 18px;
            font-weight: bold;
            margin: 15px 0;
        }
        .problem {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß© –ü—Ä–æ—Å—Ç–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥—Ä–æ–±—ñ–≤</h1>
        
        <div class="instructions">
            <h3>üéØ –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è:</h3>
            <p>1. –ù–∞—Ç–∏—Å–Ω–∏ "–î–æ–¥–∞—Ç–∏ —Ñ—ñ–≥—É—Ä—É" - –∑'—è–≤–∏—Ç—å—Å—è –∑–µ–ª–µ–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç</p>
            <p>2. –ù–∞—Ç–∏—Å–Ω–∏ "–†–æ–∑—Ä—ñ–∑–∞—Ç–∏ –Ω–∞..." - –∫–≤–∞–¥—Ä–∞—Ç —Ä–æ–∑—ñ–±'—î—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏</p>
            <p>3. –ü–µ—Ä–µ—Ç—è–≥—É–π —á–∞—Å—Ç–∏–Ω–∏ –º–∏—à–∫–æ—é (–∑–∞—Ç–∏—Å–Ω–∏ –ª—ñ–≤—É –∫–Ω–æ–ø–∫—É —ñ —Ç—è–≥–Ω–∏)</p>
            <p>4. –ù–∞—Ç–∏—Å–∫–∞–π –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏, —â–æ–± –≤–∏–¥–∞–ª–∏—Ç–∏ —ó—Ö</p>
        </div>

        <div class="problem" id="problem">
            –ù–∞—Ç–∏—Å–Ω–∏ "–ù–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è" —â–æ–± —Ä–æ–∑–ø–æ—á–∞—Ç–∏!
        </div>

        <div class="workspace" id="workspace">
            <!-- –¢—É—Ç –∑'—è–≤–ª—è—Ç–∏–º—É—Ç—å—Å—è —Ñ—ñ–≥—É—Ä–∏ -->
        </div>

        <div class="controls">
            <button onclick="addShape()">‚ûï –î–æ–¥–∞—Ç–∏ —Ñ—ñ–≥—É—Ä—É</button>
            <button onclick="divideShape(2)">üî™ –†–æ–∑—Ä—ñ–∑–∞—Ç–∏ –Ω–∞ 2</button>
            <button onclick="divideShape(4)">üî™ –†–æ–∑—Ä—ñ–∑–∞—Ç–∏ –Ω–∞ 4</button>
            <button onclick="newProblem()">üéØ –ù–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è</button>
            <button onclick="clearWorkspace()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ</button>
        </div>

        <div class="stats">
            <div>–ß–∞—Å—Ç–∏–Ω: <span id="pieceCount">0</span></div>
            <div>–î—Ä—ñ–±: <span id="fraction">0/1</span></div>
            <div>–ë–∞–ª–∏: <span id="score">0</span></div>
        </div>
    </div>

    <script>
        let score = 0;
        let currentShape = null;

        function addShape() {
            const workspace = document.getElementById('workspace');
            
            // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä—É —Ñ—ñ–≥—É—Ä—É, —è–∫—â–æ –≤–æ–Ω–∞ —î
            if (currentShape) {
                currentShape.remove();
            }
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É —Ñ—ñ–≥—É—Ä—É
            const shape = document.createElement('div');
            shape.className = 'shape';
            shape.style.left = '100px';
            shape.style.top = '100px';
            
            // –†–æ–±–∏–º–æ —Ñ—ñ–≥—É—Ä—É –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–æ—é
            makeDraggable(shape);
            
            workspace.appendChild(shape);
            currentShape = shape;
            updateStats();
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–∑–∏—Ü—ñ—é
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        function divideShape(parts) {
            if (!currentShape) {
                alert('–°–ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞–π —Ñ—ñ–≥—É—Ä—É!');
                return;
            }
            
            const workspace = document.getElementById('workspace');
            const shapeRect = currentShape.getBoundingClientRect();
            const workspaceRect = workspace.getBoundingClientRect();
            
            // –í–∏–¥–∞–ª—è—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É —Ñ—ñ–≥—É—Ä—É
            currentShape.remove();
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ —á–∞—Å—Ç–∏–Ω–∏
            for (let i = 0; i < parts; i++) {
                const piece = document.createElement('div');
                piece.className = 'piece';
                piece.textContent = `1/${parts}`;
                
                // –†–æ–∑—Ç–∞—à–æ–≤—É—î–º–æ —á–∞—Å—Ç–∏–Ω–∏ –ø–æ –∫–æ–ª—É
                const angle = (i * 2 * Math.PI) / parts;
                const radius = 80;
                const centerX = shapeRect.left - workspaceRect.left + 50;
                const centerY = shapeRect.top - workspaceRect.top + 50;
                
                piece.style.left = (centerX + radius * Math.cos(angle) - 40) + 'px';
                piece.style.top = (centerY + radius * Math.sin(angle) - 40) + 'px';
                
                // –†–æ–±–∏–º–æ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–∏–º
                makeDraggable(piece);
                
                // –î–æ–¥–∞—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–¥–∞–ª—è—Ç–∏ –∫–ª—ñ–∫–æ–º
                piece.addEventListener('click', function() {
                    this.remove();
                    updateStats();
                });
                
                workspace.appendChild(piece);
            }
            
            score += 5;
            updateStats();
        }

        function newProblem() {
            const problems = [
                "–°—Ç–≤–æ—Ä–∏ –¥—Ä—ñ–± 1/2 (—Ä–æ–∑—Ä—ñ–∂ —Ñ—ñ–≥—É—Ä—É –Ω–∞ 2 —á–∞—Å—Ç–∏–Ω–∏)",
                "–°—Ç–≤–æ—Ä–∏ –¥—Ä—ñ–± 1/4 (—Ä–æ–∑—Ä—ñ–∂ —Ñ—ñ–≥—É—Ä—É –Ω–∞ 4 —á–∞—Å—Ç–∏–Ω–∏)", 
                "–ü–æ–∫–∞–∂–∏, —è–∫ –≤–∏–≥–ª—è–¥–∞—î –ø–æ–ª–æ–≤–∏–Ω–∞",
                "–°—Ç–≤–æ—Ä–∏ 3 —á–∞—Å—Ç–∏–Ω–∏ –∑ 4 (3/4)"
            ];
            
            const randomProblem = problems[Math.floor(Math.random() * problems.length)];
            document.getElementById('problem').textContent = randomProblem;
        }

        function clearWorkspace() {
            const workspace = document.getElementById('workspace');
            workspace.innerHTML = '';
            currentShape = null;
            updateStats();
        }

        function updateStats() {
            const pieces = document.querySelectorAll('.piece');
            document.getElementById('pieceCount').textContent = pieces.length;
            document.getElementById('score').textContent = score;
            
            if (pieces.length > 0) {
                const firstPiece = pieces[0];
                const fractionText = firstPiece.textContent;
                const denominator = fractionText.split('/')[1];
                document.getElementById('fraction').textContent = `${pieces.length}/${denominator}`;
            } else {
                document.getElementById('fraction').textContent = '0/1';
            }
        }

        // –î–æ–¥–∞—î–º–æ –ø–µ—Ä—à—É —Ñ—ñ–≥—É—Ä—É –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.onload = addShape;
    </script>
</body>
</html>
